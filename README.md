# MATLAB遥感影像几何校正实验
大二上 MATLAB遥感应用 课程作业3    

## 目录结构
本项目文件夹结构如下：    
.    
├── data/    
│   ├── each_point/  # 这个文件夹运行后会产生一些.txt文件，存储每个特征匹配算法得到的特征点的详细信息    
│   └── control_point_data.txt  # 控制点数据文件    
├── img/    
│   ├── 武汉参考影像.png  # 参考影像    
│   ├── 武汉待校正影像.png  # 待校正影像    
│   └── 武汉校正后影像.png  # 校正后的影像    
├── log/  # 日志文件，用于记录程序运行时的信息    
├── homework3_picture_correction_create_point.m  # 创建控制点脚本    
├── homework3_picture_correction_load_point.m  # 加载控制点脚本    
├── point_selector.m  # 特征点手动选择器脚本  
├── read_img.m  # 图像读取脚本    
└── README.md  # 说明文档

## 环境配置

确保您的计算机上安装了 MATLAB 。作者使用的版本是 R2024a 。    
此外，本实验可能使用到了图像处理工具箱中的功能，因此您可能需要安装并激活相应的工具箱。

## 如何运行

### 准备工作

1. **下载代码和资源：**
   - 克隆或下载此仓库到本地计算机。
   - 确保文件结构正确，`img`文件夹下的完整无缺，特别是`control_point_data.txt`。

2. **设置当前目录：**
   - 打开MATLAB，将项目的根目录设置为MATLAB的当前工作目录。

### 运行步骤

1. **手动创建控制点：**

    - 如果需要手动创建控制点，请运行 `point_selector.m` 脚本，它会打开一个窗口，您可以手动点击或拖动鼠标来选择控制点。      
      **重要提示：运行次脚本时请务必按照注释中的说明设置断点并运行！否则可能无法获取到控制点数据。**
   - （这一步是可选的，如果您已经有一个满意的`control_point_data.txt`，则不需要再次运行此脚本。） 

2. **通过特征匹配算法获取特征点数据：**
   - 如果需要通过特征匹配算法自动获取控制点，请运行 `control_phomework3_picture_correction_create_point.m` 脚本，它会自动生成控制点数据文件，存放在 `data/each_point/` 文件夹下。 


3. **手动筛选控制点并写入文件：**
根据
   - 接下来，请**手动**筛选控制点，并将它们写入 `data/control_point_data.txt` 文件中。
   - 请确保控制点的数量和位置都正确无误。
   - 请不要删除或修改 `data/each_point/` 文件夹下的任何文件中的数据，否则会导致控制点数据的不精确。

4. **加载控制点并进行几何校正：**
   - 运行 `homework3_picture_correction_load_point.m` 脚本，它会自动完成从加载控制点到几何校正的所有步骤。
   - 如果 `control_point_data.txt` 文件不存在，会调用一段脚本来允许您手动选择控制点，但是这个界面不如  `point_selector.m` 友好。
   - 运行完成后，校正后的影像将保存在`img`文件夹下，名为`武汉校正后影像.png`。同时，程序会显示一些关于校正过程的日志信息，这些信息会被写入`log`文件夹内的日志文件中。

5. **查看结果：**
   - 校正后的影像将保存在`img`文件夹下，名为`武汉校正后影像.png`。同时，程序会显示一些关于校正过程的日志信息，这些信息会被写入`log`文件夹内的日志文件中。

# 注意事项
在运行任何脚本之前，请确保所有依赖的数据文件都存在并且正确无误。
如果遇到问题或者有任何疑问，请查阅MATLAB的帮助文档，或者联系作者获取帮助。

# 联系方式
如果有任何问题或建议，请通过电子邮件联系作者杨丹阳 (yangdanyang@whu.edu.cn) 或提交 issue 。